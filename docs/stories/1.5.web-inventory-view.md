# Story 1.5: Web Inventory View & Management

## Status

Ready

## GitHub Tracking

**Issue #9**: https://github.com/RosagerImaging/netpost-v2/issues/9

## Story

**As a** reseller managing my inventory from the web application,
**I want** a comprehensive inventory view with item management capabilities,
**so that** I can efficiently browse, search, and manage all my sourced items from a central dashboard.

## Acceptance Criteria

1. Web inventory page displays all user's inventory items in a responsive grid/list view
2. Each inventory item shows photo, title, description, sourcing date, and status
3. Search functionality allows filtering by title, description, and tags
4. Sort options include date added, alphabetical, and status
5. Inventory items can be clicked to view detailed information
6. Users can edit item details including photos, title, description, and tags
7. Items can be deleted with confirmation dialog and soft delete functionality
8. Pagination or infinite scroll handles large inventory collections
9. Real-time sync updates inventory when items are added via mobile app
10. Interface follows project design standards with responsive layout

## Tasks / Subtasks

- [ ] **Task 1: Inventory Page Layout** (AC: 1, 10)
  - [ ] Create inventory page route and component structure
  - [ ] Implement responsive grid/list view toggle
  - [ ] Add header with page title and action buttons
  - [ ] Create item card component with photo and metadata
  - [ ] Apply project design system and styling

- [ ] **Task 2: Data Fetching and State Management** (AC: 1, 9)
  - [ ] Set up Supabase query for user's inventory items
  - [ ] Implement React Query/SWR for data fetching and caching
  - [ ] Add real-time subscription for inventory updates
  - [ ] Handle loading and error states
  - [ ] Configure proper data transformation and typing

- [ ] **Task 3: Search and Filter Functionality** (AC: 3, 4)
  - [ ] Create search input with debounced query
  - [ ] Implement full-text search across title and description
  - [ ] Add tag-based filtering with multi-select
  - [ ] Create sort dropdown with multiple options
  - [ ] Add clear filters functionality

- [ ] **Task 4: Item Detail View** (AC: 5)
  - [ ] Create modal or side panel for item details
  - [ ] Display all item metadata and photos
  - [ ] Add photo gallery with navigation
  - [ ] Show sourcing information and timestamps
  - [ ] Include item status and listing information

- [ ] **Task 5: Item Editing Functionality** (AC: 6)
  - [ ] Create edit mode toggle for item details
  - [ ] Build form for editing title, description, and tags
  - [ ] Implement photo upload and replacement
  - [ ] Add form validation and error handling
  - [ ] Save changes with optimistic updates

- [ ] **Task 6: Item Deletion** (AC: 7)
  - [ ] Add delete button with confirmation dialog
  - [ ] Implement soft delete functionality
  - [ ] Update UI to reflect deleted items
  - [ ] Handle deletion errors and rollback
  - [ ] Add undo option for accidental deletions

- [ ] **Task 7: Pagination/Infinite Scroll** (AC: 8)
  - [ ] Implement virtual scrolling or pagination
  - [ ] Add load more functionality for large collections
  - [ ] Handle pagination with search/filter state
  - [ ] Optimize performance for large datasets
  - [ ] Add loading indicators for pagination

- [ ] **Task 8: Mobile-Web Sync Integration** (AC: 9)
  - [ ] Test real-time updates from mobile app additions
  - [ ] Verify data consistency across platforms
  - [ ] Handle sync conflicts and edge cases
  - [ ] Add visual feedback for new items
  - [ ] Test offline/online state handling

- [ ] **Task 9: Responsive Design** (AC: 10)
  - [ ] Implement mobile-first responsive layout
  - [ ] Optimize grid/list view for different screen sizes
  - [ ] Ensure touch-friendly interactions on mobile
  - [ ] Test across different viewport sizes
  - [ ] Validate accessibility standards compliance

- [ ] **Task 10: Performance Optimization** (AC: 8)
  - [ ] Implement image lazy loading and optimization
  - [ ] Add skeleton loading states
  - [ ] Optimize database queries and indexes
  - [ ] Implement client-side caching strategies
  - [ ] Test performance with large inventories

## Dev Notes

### Previous Story Context

Stories 1.1-1.4 established the project foundation, authentication, database schema, and mobile sourcing app. This story creates the web counterpart for inventory management.

### Architecture Requirements

[Source: docs/brief.md, docs/architecture/6-components.md]

- **Frontend Platform**: Next.js React web application
- **Data Layer**: Supabase with real-time subscriptions
- **UI Framework**: Tailwind CSS with Shadcn/ui components
- **State Management**: React Query/SWR for server state

### Core Web Application Workflow

[Source: docs/brief.md - Web Application section]

- **Primary Function**: Full-featured web application as the central hub
- **Key Features**: Comprehensive inventory management, search, filtering, editing
- **User Experience**: Efficient workflow for managing large inventories
- **Integration**: Real-time sync with mobile sourcing data

### Data Models Integration

[Source: docs/architecture/4-data-models.md, Story 1.3 context]

- **InventoryItem Model**: Complete item data with photos, descriptions, sourcing info
- **User Relationship**: Items filtered by authenticated user
- **Real-time Sync**: Supabase subscriptions for live updates
- **Photo Management**: Multiple photos per item with gallery view

### UI/UX Design Requirements

[Source: docs/prd/3-user-interface-design-goals.md]

- **Professional Interface**: Clean, modern design for professional resellers
- **Efficiency Focus**: Quick access to common actions and information
- **Responsive Design**: Works seamlessly across desktop, tablet, and mobile
- **Visual Hierarchy**: Clear information organization and navigation

### File Locations

```
apps/web/src/
├── app/(dashboard)/
│   ├── inventory/
│   │   ├── page.tsx              # Main inventory page
│   │   ├── components/
│   │   │   ├── InventoryGrid.tsx # Grid view component
│   │   │   ├── InventoryItem.tsx # Individual item card
│   │   │   ├── ItemDetail.tsx    # Item detail modal/panel
│   │   │   ├── SearchFilters.tsx # Search and filter controls
│   │   │   └── ItemEditForm.tsx  # Edit item form
│   │   └── hooks/
│   │       ├── useInventory.ts   # Data fetching hook
│   │       └── useItemActions.ts # CRUD operations hook
├── components/ui/                # Shared UI components
└── lib/
    ├── supabase/
    │   └── inventory.ts          # Inventory-specific queries
    └── hooks/
        └── use-realtime.ts       # Real-time subscription hook
```

### Performance Requirements

[Source: docs/brief.md]

- **Fast Loading**: Optimized for large inventory collections
- **Real-time Updates**: Immediate reflection of mobile app changes
- **Smooth Interactions**: Responsive search, filtering, and navigation
- **Efficient Queries**: Optimized database queries with proper indexing

### Security Considerations

- **User Data Isolation**: Row Level Security policies for inventory access
- **Photo Security**: Secure photo uploads and access controls
- **API Security**: Proper authentication and authorization checks
- **Input Validation**: Client and server-side validation for all inputs

### Testing Standards

- **Unit Tests**: Component testing with React Testing Library
- **Integration Tests**: API integration and data flow testing
- **E2E Tests**: User workflow testing with Playwright
- **Performance Tests**: Load testing with large datasets
- **Test Location**: `apps/web/src/app/(dashboard)/inventory/**/*.test.tsx`

## Change Log

| Date       | Version | Description                                          | Author             |
| ---------- | ------- | ---------------------------------------------------- | ------------------ |
| 2025-09-16 | 1.0     | Initial story creation for web inventory view system | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used

_To be populated by development agent_

### Debug Log References

_To be populated by development agent_

### Completion Notes List

_To be populated by development agent_

### File List

_To be populated by development agent_

## QA Results

_To be populated by QA agent after story completion_